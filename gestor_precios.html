<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Gestor de Precios de Importación</title>
    <style>
        :root {
            --primary-color: #0056b3;
            --secondary-color: #f8f9fa;
            --border-color: #dee2e6;
            --text-color: #212529;
            --white: #fff;
            --danger-color: #dc3545;
            --danger-hover: #c82333;
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, "Helvetica Neue", Arial, sans-serif;
            line-height: 1.6;
            background-color: #f4f4f9;
            color: var(--text-color);
            margin: 0;
            padding: 20px;
        }

        .container {
            max-width: 1200px;
            margin: auto;
            background: var(--white);
            padding: 25px;
            border-radius: 8px;
            box-shadow: 0 2px 10px rgba(0, 0, 0, 0.1);
        }

        h1, h2 {
            color: var(--primary-color);
            text-align: center;
            margin-bottom: 20px;
        }

        .tasas-container, .producto-form {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 20px;
            padding: 20px;
            background-color: var(--secondary-color);
            border-radius: 8px;
            margin-bottom: 25px;
            border: 1px solid var(--border-color);
        }
        
        .producto-form {
             grid-template-columns: 2fr 1fr 1fr auto;
        }

        .form-group {
            display: flex;
            flex-direction: column;
        }

        label {
            font-weight: 600;
            margin-bottom: 5px;
        }

        input[type="number"], input[type="text"], select {
            width: 100%;
            padding: 10px;
            border: 1px solid var(--border-color);
            border-radius: 4px;
            box-sizing: border-box;
            font-size: 1rem;
        }
        
        input:focus, select:focus {
            outline: none;
            border-color: var(--primary-color);
            box-shadow: 0 0 0 2px rgba(0, 86, 179, 0.25);
        }

        .btn {
            padding: 10px 15px;
            border: none;
            border-radius: 4px;
            cursor: pointer;
            font-size: 1rem;
            font-weight: 600;
            transition: background-color 0.2s ease-in-out;
            align-self: end; /* Alinea el botón al final en el grid */
        }

        .btn-primary {
            background-color: var(--primary-color);
            color: var(--white);
        }

        .btn-primary:hover {
            background-color: #004494;
        }
        
        .btn-danger {
            background-color: var(--danger-color);
            color: var(--white);
            padding: 5px 10px;
            font-size: 0.9rem;
        }
        
        .btn-danger:hover {
            background-color: var(--danger-hover);
        }

        .tabla-precios {
            width: 100%;
            border-collapse: collapse;
            margin-top: 25px;
        }

        .tabla-precios th, .tabla-precios td {
            border: 1px solid var(--border-color);
            padding: 12px;
            text-align: left;
        }

        .tabla-precios thead {
            background-color: var(--primary-color);
            color: var(--white);
        }

        .tabla-precios tbody tr:nth-child(even) {
            background-color: var(--secondary-color);
        }
        
        .tabla-precios td:nth-child(n+3) {
            text-align: right;
            font-family: "Courier New", Courier, monospace;
            font-weight: bold;
        }
        
        .na {
            color: #999;
            text-align: center !important;
            font-style: italic;
        }

    </style>
</head>
<body>

    <div class="container">
        <h1>Gestor de Precios de Importación</h1>

        <h2>Tasas de Referencia</h2>
        <div class="tasas-container">
            <div class="form-group">
                <label for="tasa-bcv">Dólar BCV (Bs.)</label>
                <input type="number" id="tasa-bcv" placeholder="Ej: 36.50" step="0.01">
            </div>
            <div class="form-group">
                <label for="tasa-binance">Dólar Binance (Bs.)</label>
                <input type="number" id="tasa-binance" placeholder="Ej: 38.20" step="0.01">
            </div>
            <div class="form-group">
                <label for="tasa-euro">Euro BCV (Bs.)</label>
                <input type="number" id="tasa-euro" placeholder="Ej: 40.15" step="0.01">
            </div>
        </div>

        <h2>Añadir Producto</h2>
        <div class="producto-form">
            <div class="form-group">
                <label for="producto-nombre">Nombre del Producto</label>
                <input type="text" id="producto-nombre" placeholder="Ej: Laptop Modelo X">
            </div>
            <div class="form-group">
                <label for="producto-costo">Costo</label>
                <input type="number" id="producto-costo" placeholder="Ej: 850.00" step="0.01">
            </div>
            <div class="form-group">
                <label for="producto-moneda">Moneda</label>
                <select id="producto-moneda">
                    <option value="USD">USD ($)</option>
                    <option value="EUR">EUR (€)</option>
                </select>
            </div>
            <button id="btn-agregar" class="btn btn-primary">Añadir</button>
        </div>

        <table class="tabla-precios">
            <thead>
                <tr>
                    <th>Producto</th>
                    <th>Costo Original</th>
                    <th>Precio en Bs (Tasa BCV)</th>
                    <th>Precio en Bs (Tasa Binance)</th>
                    <th>Precio en Bs (Tasa Euro)</th>
                    <th>Acción</th>
                </tr>
            </thead>
            <tbody id="tabla-body">
                <!-- Las filas de productos se añadirán aquí -->
            </tbody>
        </table>
    </div>

    <script>
        document.addEventListener('DOMContentLoaded', () => {
            // --- REFERENCIAS A ELEMENTOS DEL DOM ---
            const tasaBcvInput = document.getElementById('tasa-bcv');
            const tasaBinanceInput = document.getElementById('tasa-binance');
            const tasaEuroInput = document.getElementById('tasa-euro');
            
            const productoNombreInput = document.getElementById('producto-nombre');
            const productoCostoInput = document.getElementById('producto-costo');
            const productoMonedaSelect = document.getElementById('producto-moneda');
            
            const btnAgregar = document.getElementById('btn-agregar');
            const tablaBody = document.getElementById('tabla-body');

            // --- FUNCIÓN PARA FORMATEAR NÚMEROS COMO MONEDA ---
            const formatCurrency = (value) => {
                if (isNaN(value) || value === null) return '<span class="na">N/A</span>';
                return `Bs. ${value.toLocaleString('es-VE', { minimumFractionDigits: 2, maximumFractionDigits: 2 })}`;
            };
            
            const formatOriginalCost = (cost, currency) => {
                const symbol = currency === 'USD' ? '$' : '€';
                return `${symbol} ${cost.toLocaleString('es-VE', { minimumFractionDigits: 2, maximumFractionDigits: 2 })}`;
            };

            // --- FUNCIÓN PRINCIPAL PARA AÑADIR PRODUCTO ---
            const agregarProducto = () => {
                // 1. Obtener valores de los inputs
                const tasaBcv = parseFloat(tasaBcvInput.value);
                const tasaBinance = parseFloat(tasaBinanceInput.value);
                const tasaEuro = parseFloat(tasaEuroInput.value);
                
                const nombre = productoNombreInput.value.trim();
                const costo = parseFloat(productoCostoInput.value);
                const moneda = productoMonedaSelect.value;

                // 2. Validar inputs
                if (!nombre || isNaN(costo) || costo <= 0) {
                    alert('Por favor, introduce un nombre y un costo válido para el producto.');
                    return;
                }

                // 3. Calcular precios
                let precioBcv = null;
                let precioBinance = null;
                let precioEuro = null;

                if (moneda === 'USD') {
                    if (!isNaN(tasaBcv)) precioBcv = costo * tasaBcv;
                    if (!isNaN(tasaBinance)) precioBinance = costo * tasaBinance;
                } else if (moneda === 'EUR') {
                    if (!isNaN(tasaEuro)) precioEuro = costo * tasaEuro;
                }

                // 4. Crear la nueva fila en la tabla
                const newRow = document.createElement('tr');
                
                newRow.innerHTML = `
                    <td>${nombre}</td>
                    <td>${formatOriginalCost(costo, moneda)}</td>
                    <td>${formatCurrency(precioBcv)}</td>
                    <td>${formatCurrency(precioBinance)}</td>
                    <td>${formatCurrency(precioEuro)}</td>
                    <td><button class="btn btn-danger btn-eliminar">Eliminar</button></td>
                `;

                // 5. Añadir evento al botón de eliminar
                newRow.querySelector('.btn-eliminar').addEventListener('click', () => {
                    newRow.remove();
                });

                // 6. Añadir la fila a la tabla y limpiar el formulario
                tablaBody.appendChild(newRow);
                productoNombreInput.value = '';
                productoCostoInput.value = '';
                productoNombreInput.focus();
            };

            // --- ASIGNAR EVENTOS ---
            btnAgregar.addEventListener('click', agregarProducto);
            
            // Opcional: Permitir añadir con la tecla Enter en el último campo
            productoCostoInput.addEventListener('keypress', (e) => {
                if (e.key === 'Enter') {
                    agregarProducto();
                }
            });
        });
    </script>

</body>
</html>
